/*! validate-framework v1.1.5 | MIT (c) 2016 LMY | https://github.com/MinJieLiu/validator.js */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Validator=e()}}(function(){function e(e){return e.replace(/\_([a-z])/g,function(e,t){return t.toUpperCase()})}function t(e){for(var t in e)return!t;return!0}function r(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function n(e,t){r(e,t)||(e.className+=" "+t)}function i(e,t){if(r(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function a(e,t){var r,n;{if(!(e.length>0)||"radio"!==e[0].type&&"checkbox"!==e[0].type)return e[t];for(r=0,n=e.length;n>r;r++)if(e[r].checked)return e[r][t]}}function s(e){return"object"==typeof e?e:document.forms[e]}function o(e){return void 0!==e.parentNode}function l(e){if(!f.is_date(e))return!1;var t,r=new Date;return t=e.split("-"),r.setFullYear(t[0]),r.setMonth(t[1]-1),r.setDate(t[2]),r}function u(e){return"string"==typeof e?e:e.value}var d={rule:/^(.+?)\((.+)\)$/,numeric:/^[0-9]+$/,integer:/^\-?[0-9]+$/,decimal:/^\-?[0-9]*\.?[0-9]+$/,email:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,ip:/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])((\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}|(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){5})$/,tel:/^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/,phone:/^((\+?[0-9]{1,4})|(\(\+86\)))?(13[0-9]|14[57]|15[012356789]|17[0678]|18[0-9])\d{8}$/,abc:/^[a-zA-Z0-9_]*$/,url:/[a-zA-z]+:\/\/[^\s]/,date:/^\d{4}-\d{1,2}-\d{1,2}$/},f={is_numeric:function(e){return d.numeric.test(u(e))},is_integer:function(e){return d.integer.test(u(e))},is_decimal:function(e){return d.decimal.test(u(e))},is_email:function(e){return d.email.test(u(e))},is_ip:function(e){return d.ip.test(u(e))},is_tel:function(e){return d.tel.test(u(e))},is_phone:function(e){return d.phone.test(u(e))},is_abc:function(e){return d.abc.test(u(e))},is_url:function(e){return d.url.test(u(e))},is_date:function(e){var t=u(e);if(d.date.test(t)){t=t.split("-");var r=parseInt(t[0],10),n=parseInt(t[1],10),i=parseInt(t[2],10);if(1>r||r>9999||1>n||n>12)return!1;var a=[31,28,31,30,31,30,31,31,30,31,30,31];return(r%400===0||r%100!==0&&r%4===0)&&(a[1]=29),!(1>i||i>a[n-1])}return!1},required:function(e){return"checkbox"===e.type||"radio"===e.type?e.checked===!0:null!==u(e)&&""!==u(e)},greater_than:function(e,t){var r=u(e);return d.decimal.test(r)?parseFloat(r)>parseFloat(t):!1},less_than:function(e,t){var r=u(e);return d.decimal.test(r)?parseFloat(r)<parseFloat(t):!1},max_length:function(e,t){return d.integer.test(t)?u(e).length<=parseInt(t,10):!1},min_length:function(e,t){return d.integer.test(t)?u(e).length>=parseInt(t,10):!1},greater_than_date:function(e,t){var r=l(u(e)),n=l(t);return n&&r?r>n:!1},less_than_date:function(e,t){var r=l(u(e)),n=l(t);return n&&r?n>r:!1}},c=function(t,r){for(var n in f)this[e(n)]=f[n];if(!t)return this;this.options=r||{},this.form=s(t)||{},this.errors={},this.fields={},this.handles={};var i="object"==typeof r.fields?r.fields:{};this.form.setAttribute("novalidate","novalidate");for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];if(!o.rules){console.warn(o);continue}this._addField(a,o)}this.form.onchange=function(e){return function(t){try{return e._validateField(e.fields[t.target.name])}catch(r){}}}(this);var l=this.form.onsubmit;this.form.onsubmit=function(e){return function(t){try{return e.validate(t)&&(void 0===l||l())}catch(r){}}}(this)};return c.prototype={validate:function(e){this.handles.ok=!0,this.handles.evt=e,this.errors={};for(var r in this.fields)if(this.fields.hasOwnProperty(r)){var n=this.fields[r];this._validateField(n)}return t(this.errors)?("object"==typeof this.options&&"function"==typeof this.options.callback&&this.options.callback(e),this):this.preventSubmit()},validateByName:function(e){var r=this.fields[e];return t(r)||this._validateField(r),this},preventSubmit:function(){var e=this.handles.evt;return e&&e.preventDefault?e.preventDefault():e&&(e.returnValue=!1),!1},addMethod:function(t,r){f[t]=r,this[e(t)]=f[t]},_validateField:function(e){var t=this.form[e.name],r=!1;t&&void 0!==t&&(e.id=a(t,"id"),e.el=t,e.type=t.length>0?t[0].type:t.type,e.value=a(t,"value"),e.checked=a(t,"checked"));var n=-1!==e.rules.indexOf("required"),i=!e.value||""===e.value||void 0===e.value,s=e.rules.split(/\s*\|\s*/g);delete this.errors[e.name];for(var o=0,l=s.length;l>o&&!r;o++){var u=s[o],c=d.rule.exec(u),h="";if(c&&(u=c[1],h=c[2]),(n||!i)&&("function"==typeof f[u]&&(f[u].apply(this,[e,h])||(r=!0)),r)){for(var p,v=function(){var t=e.messages.split(/\s*\|\s*/g)[o];return t?t.replace(/\{\{\s*value\s*\}\}/g,e.value).replace(/\{\{\s*param\s*\}\}/g,h):t}(),m=0,g=this.errors.length;g>m;m+=1)e.el===this.errors[m].el&&(p=this.errors[m]);var _=p||{el:e.el,name:e.name,message:v,rule:u};p||(this.errors[e.name]=_)}}return r?this._addErrorPlacement(e):this._removeErrorMessage(e),this},_addField:function(e,t){this.fields[e]={name:e,messages:t.messages,rules:t.rules,id:null,el:null,type:null,value:null,checked:null}},_removeErrorMessage:function(e){if(o(e.el))i(e.el,"valid-error");else for(var t=0,r=e.el.length;r>t;t++)i(e.el[t],"valid-label-error");var n=document.getElementById("valid_error_"+e.name);n&&n.parentNode.removeChild(n)},_addErrorPlacement:function(e){if(this.errors[e.name]){if(this._removeErrorMessage(e),o(e.el))n(e.el,"valid-error");else for(var t=0,r=e.el.length;r>t;t++)n(e.el[t],"valid-label-error");var i=document.createElement("em");n(i,"valid-error-message"),i.setAttribute("id","valid_error_"+e.name),i.innerHTML=this.errors[e.name].message,"object"==typeof this.options&&"function"==typeof this.options.errorPlacement?this.options.errorPlacement(i,e.el):o(e.el)&&e.el.parentNode.appendChild(i)}}},c});

