/*! validate-framework v2.0.0 | MIT (c) 2016 LMY | https://github.com/MinJieLiu/validator.js */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Validator=e()}}(function(){function e(e){return"string"==typeof e?e:e.value}function t(e){if(!m.is_date(e))return!1;var t,r=new Date;return t=e.split("-"),r.setFullYear(t[0]),r.setMonth(t[1]-1),r.setDate(t[2]),r}function r(){return"undefined"!=typeof window}function n(e){return r()?e||window.event:null}function i(e){return e.replace(/\_([a-z])/g,function(e,t){return t.toUpperCase()})}function a(e,t){for(var r in t)e[r]=t[r];return e}function s(e){return"radio"===e.type||"checkbox"===e.type}function l(e){return"OPTION"===e[0].tagName}function o(e){return e&&e.length&&!s(e[0])&&!l(e)}function u(e){return document.getElementsByName(e)}function d(e,t){var r,n;if(!s(e[0]))return e[0][t];for(r=0,n=e.length;r<n;r++)if(e[r].checked)return e[r][t]}function f(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function c(e,t){f(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}function h(e,t){if(f(e,t)){var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.classList?e.classList.remove(t):e.className=e.className.replace(r," ")}}var v={numeric:/^\d+$/,integer:/^\-?\d+$/,decimal:/^\-?\d*\.?\d+$/,email:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,ip:/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])((\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}|(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){5})$/,tel:/^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/,phone:/^1[3-9]\d{9}$/,abc:/^\w+$/,url:/[a-zA-Z]+:\/\/[^\s]*/,date:/^\d{4}-\d{1,2}-\d{1,2}$/},m={is_numeric:function(t){return v.numeric.test(e(t))},is_integer:function(t){return v.integer.test(e(t))},is_decimal:function(t){return v.decimal.test(e(t))},is_email:function(t){return v.email.test(e(t))},is_ip:function(t){return v.ip.test(e(t))},is_tel:function(t){return v.tel.test(e(t))},is_phone:function(t){return v.phone.test(e(t))},is_abc:function(t){return v.abc.test(e(t))},is_url:function(t){return v.url.test(e(t))},is_date:function(t){var r=e(t);if(v.date.test(r)){r=r.split("-");var n=parseInt(r[0],10),i=parseInt(r[1],10),a=parseInt(r[2],10);if(n<1||n>9999||i<1||i>12)return!1;var s=[31,28,31,30,31,30,31,31,30,31,30,31];return(n%400===0||n%100!==0&&n%4===0)&&(s[1]=29),!(a<1||a>s[i-1])}return!1},required:function(t){return s(t)?t.checked===!0:null!==e(t)&&""!==e(t)},greater_than:function(t,r){var n=e(t);return!!v.decimal.test(n)&&parseFloat(n)>parseFloat(r)},less_than:function(t,r){var n=e(t);return!!v.decimal.test(n)&&parseFloat(n)<parseFloat(r)},max_length:function(t,r){return!!v.integer.test(r)&&e(t).length<=parseInt(r,10)},min_length:function(t,r){return!!v.integer.test(r)&&e(t).length>=parseInt(r,10)},greater_than_date:function(r,n){var i=t(e(r)),a=t(n);return!(!a||!i)&&i>a},less_than_date:function(r,n){var i=t(e(r)),a=t(n);return!(!a||!i)&&i<a}},p={errorClass:"valid-error",errorEl:"em",eventLevel:"all"},g=function(e){for(var t in m)this[i(t)]=m[t];if(!e)return this;var n=a(p,e);this.opts=n,this.form={},this.bodyData=e.bodyData,this.errors={},this.fields={},this.handles={};var s=n.fields;return this.addFields(s),r()&&n.formName&&(this.form=document.forms[n.formName],this.form.setAttribute("novalidate","novalidate"),this.onInputEvent(),this._onSubmit()),this};return g.prototype={validate:function(e){this.handles.evt=n(e);var t=!0;for(var r in this.fields)this.validateByName(r)||(t=!1);return t?this.errors=null:this.preventSubmit(),"function"==typeof this.opts.callback&&this.opts.callback(this.errors,this.handles.evt),t},validateByName:function(e){var t=this.fields[e],r=!1;if(!t)return r;var n=this._getArrayByName(t.name);if(o(n)){for(var i=!0,a=0,s=n.length;a<s;a++)t.el=[n[a]],this._validateField(t)||(i=!1);r=i}else t.el=n,r=this._validateField(t);return r},preventSubmit:function(){var e=this.handles.evt;return e&&e.preventDefault?e.preventDefault():e&&(e.returnValue=!1),this},addMethod:function(e,t){return"function"==typeof t&&(m[e]=t,this[i(e)]=t),this},addFields:function(e){if("object"==typeof e)for(var t in e){var r=e[t];r.rules&&(r.name=t,this._initField(r),this.fields[t]=r)}return this},removeFields:function(e){if(e instanceof Array)for(var t,r=e.length;t<r;t++)this.fields&&delete this.fields[e[t]],this.errors&&delete this.errors[e[t]];return this},onInputEvent:function(e,t){for(var r=function(e){return function(t){try{t=n(t);var r=t.target||t.srcElement,i=e.fields[r.name];return i.el=e._getArrayByName(i.name),e._validateField(i)}catch(e){}}}(this),i=e?this._getArrayByName(e):this.form.elements,a=0,s=i.length;a<s;a++){var l,o,u=function(){};switch(t=t||this.opts.eventLevel){case"off":l=u,o=u;break;case"change":l=u,o=r;break;case"all":l=r,o=r}var d=i[a];window.ActiveXObject||"ActiveXObject"in window?d.onkeyup=l:d.oninput=l,d.onchange=o}return this},_onSubmit:function(){var e=this.form.onsubmit;this.form.onsubmit=function(t){return function(r){try{return r=n(r),t.validate(r)&&(void 0===e||e())}catch(e){}}}(this)},_validateField:function(e){var t=!0;this.errors=this.errors||{};var r=this.errors[e.name];this._updateField(e);for(var n=e.rules.indexOf("required")!==-1,i=void 0===e.value||""===e.value||null===e.value,a=e.rules.split(/\s*\|\s*/g),s=0,l=a.length;s<l&&t;s++){var o=a[s],u=/^(.+?)\((.+)\)$/.exec(o),d="";u&&(o=u[1],d=u[2]),!n&&i||("function"==typeof m[o]&&(m[o].apply(this,[e,d])||(t=!1)),this.errors[e.name]={el:e.el,name:e.name,rule:o},t||(this.errors[e.name].message=function(){var t=e.messages?e.messages.split(/\s*\|\s*/g)[s]:"";return t?t.replace(/\{\{\s*value\s*\}\}/g,e.value).replace(/\{\{\s*param\s*\}\}/g,d):t}()),r=this.errors[e.name])}if(t&&delete this.errors[e.name],!e.el)return t;if(r){var f=this.opts.errorClass;r.clazz=f,r.placeId=(f+"_"+(e.id||e.name)).replace("-","_"),t?this._removeErrorPlace(r):this._addErrorPlace(r)}return t},_updateField:function(e){if(this.bodyData)return void(e.value=this.bodyData[e.name]);var t=e.el;t?(e.id=t[0].id,e.type=t[0].type,e.value=d(t,"value"),e.checked=d(t,"checked")):this._initField(e)},_initField:function(e){e.id=null,e.el=null,e.type=null,e.value=null,e.checked=null},_getArrayByName:function(e){if(r()){var t;if(t=this.opts.formName?this.form[e]:u(e),!t||0===t.length)return null;var n=[],i=t.length;if(i&&!l(t))for(var a=0;a<i;a++)n.push(t[a]);else n.push(t);return n}return null},_removeErrorPlace:function(e){if(e.el){for(var t=0,r=e.el.length;t<r;t++)h(e.el[t],e.clazz);var n=document.getElementById(e.placeId);n&&n.parentNode.removeChild(n)}},_addErrorPlace:function(e){if(e.el){this._removeErrorPlace(e);for(var t=0,r=e.el.length;t<r;t++)c(e.el[t],e.clazz);var n=document.createElement(this.opts.errorEl);if(c(n,e.clazz+"-message"),n.setAttribute("id",e.placeId),n.innerText=e.message,"function"==typeof this.opts.errorPlacement)this.opts.errorPlacement(n,e.el[0]);else{var i=e.el[0];s(i)||i.parentNode.appendChild(n)}}}},g});

